#!/bin/bash

set -euo pipefail

description="$1"
validationType="$2"
iterationsFolds="$3"
fsAlgo="$4"
inputDir="$5"
outputDir="$6"
verbose="$7"
logFile="$8"

analysisType=$(basename $0)
dataFile="$inputDir/$description.tsv.gz"
specificOutputDir=$outputDir/${analysisType}_${description}_${validationType}

UserScripts/${analysisType}_${validationType} --data "$dataFile" --description "$description" $iterationsFolds --fs-algo "$fsAlgo" --output-dir $specificOutputDir $verbose

python BuildTests/CheckSelectedFeatures.py $analysisType $validationType $description "$fsAlgo" "$specificOutputDir/SelectedFeatures.tsv" Algorithm 2>&1 | tee -a $logFile
python BuildTests/CheckSummarizedSelectedFeatures.py "$specificOutputDir/SelectedFeatures_Summarized.tsv" 2>&1 | tee -a $logFile
